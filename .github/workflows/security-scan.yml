name: Security Scanning (SAST + Dependency)

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  sast-and-dep-scan:
    runs-on: ubuntu-latest
    name: Run SAST and Dependency Scanners

    steps:
    - name: 📦 Checkout code
      uses: actions/checkout@v3

    - name: 🐘 Set up PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.1'
        extensions: mbstring, xml, bcmath, zip
        coverage: none


    ##############################
    # ✅ SAST Scan (Semgrep)
    ##############################
      ##############################
    # ✅ SAST Scan (Semgrep)
    ##############################
    - name: 🧪 Run Semgrep SAST
      uses: returntocorp/semgrep-action@v1
      with:
       config: >
        p/php
        p/security-audit
       strict: false

